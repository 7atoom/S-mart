@if (cartItemsCount() === 0) {
  <div class="min-h-screen pt-20 pb-24 flex flex-col items-center justify-center px-6">
    <div class="text-center">
      <div
        class="w-20 h-20 rounded-full bg-[hsl(var(--cream-dark))] flex items-center justify-center mx-auto mb-6"
      >
        <i class="fas fa-shopping-cart text-6xl text-[hsl(var(--muted-foreground))]"></i>
      </div>

      <h1 class="font-serif text-3xl font-bold text-[hsl(var(--foreground))] mb-3">
        Your cart is empty
      </h1>

      <p class="font-sans mb-8 max-w-sm text-[hsl(var(--muted-foreground))]">
        Start adding fresh ingredients or let our AI build a recipe for you.
      </p>

      <div class="flex flex-col sm:flex-row gap-3 justify-center">
        <a
          routerLink="/shop"
          class="px-6 py-3 rounded-2xl bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))] font-medium transition-colors hover:bg-[hsl(var(--olive-light))]"
        >
          Browse Shop
        </a>

        <a
          routerLink="/aiChef"
          class="flex items-center justify-center gap-2 px-6 py-3 rounded-2xl border-2 border-[hsl(var(--gold)/0.4)] text-[hsl(var(--foreground))] font-medium transition-colors hover:bg-[hsl(var(--cream-dark))]"
        >
          <i class="fas fa-robot text-[hsl(var(--gold))]"></i>
          Try AI Chef
        </a>
      </div>
    </div>
  </div>
} @else {
  <div class="container mx-auto 2xl:w-[85%]">
    <div class="min-h-screen py-12 ">
      <div class="mx-auto px-4 sm:px-6">
        <h1 class="font-serif text-3xl sm:text-4xl font-bold text-[hsl(var(--foreground))] mb-6 sm:mb-8">Your Cart</h1>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8">
          <!-- LEFT: Cart items -->
          <div class="lg:col-span-2 space-y-2 sm:space-y-4">
            <!-- Cart List -->
            <div class="rounded-2xl bg-[hsl(var(--card))] shadow-(--shadow-warm) p-3 sm:p-5">
              <div class="divide-y divide-[hsl(var(--border)/0.5)]">
                @for (item of cartItems(); track item.productId ?? item._id) {
                  <app-cart-item-row
                    [cartItem]="item"
                    (quantityChange)="updateQuantity($event.itemId, $event.newQuantity)"
                    (remove)="removeItem($event)"
                  ></app-cart-item-row>
                }
              </div>
            </div>

            <!-- AI suggestion -->
            <div class="rounded-2xl bg-[hsl(var(--cream-dark))] p-4 sm:p-5 flex flex-col sm:flex-row items-start sm:items-center gap-3 mt-4">
              <div
                class="w-8 h-8 rounded-full bg-gradient-gold flex items-center justify-center shrink-0"
              >
                <i class="fas fa-robot w-4 h-4 text-[hsl(var(--foreground))]"></i>
              </div>

              <p class="text-xs sm:text-sm font-sans text-[hsl(var(--muted-foreground))] flex-1">
                <span class="text-[hsl(var(--foreground))] font-medium">Don't forget!</span>
                Add some fresh herbs to complement your meal.
              </p>

              <a
                routerLink="/shop"
                [queryParams]="{ category: 'Spices & Herbs' }"
                class="text-[hsl(var(--accent))] text-sm font-medium whitespace-nowrap hover:underline self-end sm:self-auto"
              >
                Browse â†’
              </a>
            </div>
          </div>

          <!-- RIGHT: Order Summary (Sticky only on large screens) -->
          <div class="lg:col-span-1">
            <app-cart-summary
              class="block lg:sticky lg:top-24"
              [total]="total()"
              [deliveryFee]="deliveryFee()"
            ></app-cart-summary>
          </div>
        </div>
      </div>
    </div>
  </div>
}
